---
title: "[강의 정리] 실전! 스프링 부트와 JPA 활용1 - 웹 애플리케이션 개발"
search: true
categories: 
  - 백엔드 공부
last_modified_at: 2023-11-03 16:40:00 +0900
---

#### View 환경 설정

model.addAttribute
model이란 여기 데이터를 실어서 view에 넘김

#### JPA와 DB 설정, 동작확인

public Long save  
return member.getId()  
멤버를 반환하지 않고 아이디를 반환하는 이유  
커맨드와 쿼리를 구분해라  
이것은 사이드 이펙트를 일으키는 커맨드성이기 때문에 리턴값을 거의 만들지 않음  

Embedded
내장타입설정

#### SQL 중심적인 개발의 문제점

#### JPA 소개

JPA 표준 인터페이스에 Hibernate 구현체

JPA를 사용하는 이유
SQL 중심적인 개발에서 객체 중심 개발

#### Hello JPA - 애플리케이션 개발

@Entity
jpa가 처음 로딩될 때 jpa를 사용하는 클래스인지 인식하기 위해서 사용

JPQL
entityManager.createQuery
테이블 대상으로 짜는 것이 아니고 객체 대상

#### 영속성 컨텍스트 1

영속성 컨텍스트

#### 영속성 컨텍스트 2

#### 플러시

영속성 컨텍스트의 변경사항을 데이터베이스에 동기화

#### 준영속 상태

em.clear();
1차 캐시 제거

#### 필드와 컬럼 매핑

enum 타입은 반드시 EnumType.STRING 으로해야됨
ordinal 사용 금지(순서대로 0부터 값을 매기는데 순서가 바뀌면
데이터 잘못됨)

#### 기본 키 매핑

전략
IDENTITY
SEQUENCE

#### 실전 예제 1 - 요구사항 분석과 기본 매핑

getter setter 는 꼭 필요할때만 만들고
생성자로 처리

#### 양방향 연관관계와 연관관계의 주인 1- 기본

연관관계의 주인만 set을 해주고  
아직 flush 전이면 영속성 컨텍스트에만 존재하기 때문에  
상대에서 조회할 때 없음
때문에 setTeam 해줄때 반대편에서도 set을 해주는 것을 추가
set으로 시작하면 관례적인것이기때문에 이렇게 로직이 추가되었을 때는
함수명 변경

entity를 api에서 반환하지마라
단순하게 값만 있는 DTO로 변화해서 반환

#### 일대일 [1:1]

mapped by
읽기전용

#### 다대다 [N:M]

가이드
연결 테이블용 엔티티 추가
PK는 조합키로 하지말고 의미없는 id 하나를 만들자

#### 상속관계 매핑

조인전략


단일 테이블 전략  
일반적으로는 조회 속도가 빠르지만 테이블이 커졌을 떼 오히려 조인전략보다 느려질 수 있음  
null 허용해야 하므로 무결성 위배  

#### 즉시 로딩과 지연 로딩

실무에서는 웬만하면 지연 로딩 사용
즉시 로딩하면 조인쿼리가 많아져 성능 떨어짐
